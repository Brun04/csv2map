<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>CSV to Map</title>
		<link rel="icon" href="assets/csv2map.svg">
        <link rel="stylesheet" href="csvgeocoder.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>
        <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.js"></script>
		<script src="PapaParse-5.0.2/papaparse.min.js"></script>
        <script src="csvgeocoder.js"></script>
		<meta http-equiv="Access-Control-Allow-Origin" content="http://api-adresse.data.gouv.fr/search/">		
    </head>
    <body>
		<!-- Navigation bar -->
		<script>
            document.addEventListener('DOMContentLoaded', () => {const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
            if ($navbarBurgers.length > 0) {$navbarBurgers.forEach( el => {el.addEventListener('click', () => {const target = el.dataset.target;const $target = document.getElementById(target);el.classList.toggle('is-active');$target.classList.toggle('is-active');});});}});
        </script>
		<nav class="navbar">
			<div class="navbar-content">
				<div class="navbar-home">
					<a href=""><img src="assets/csv2map.svg"> CSV2MAP</a>
					<sapn class="navbar-burger" data-target="navbarMenu">
						<span></span>
						<span></span>
						<span></span>
						<span></span>
					</span>
				</div>
				<div class="navbar-menu" id="navbarMenu">
					<div class="navbar-end">
						<a id="fileUploader"><img src="assets/uploadWhite.svg"> Upload CSV file<input type="file" id="files" accept="text/csv" style="display: none;"></a>
						<a id="mapDisplayer"><img src="assets/map.svg"> Display map</a>
						<a id="geoDownloader" class="is-disable"><img src="assets/downloadWhite.svg"> Download GeoCSV</a>
					</div>
				</div>
			</div>
        </nav>

		<!-- Main -->
		<div id="main">
			<div id="map-div" class="div-map is-active">
				<img src="assets/closeWhite.svg" id="hide-map" class="icon">
				<div id="map"></div>
			</div>
			<div id="gridTab" class="table-list ag-theme-alpine-dark"></div>
			
			<div id="optionsPopup" class="popup">
				<h2 class="text-center">OPTIONS</h2>
				<div>
					<h3>Columns:</h3>
					<table class="center text-center">
						<thead>
							<tr><th>CSV<br>column</th><th>Geo<br>column</th><th>Map popup<br>content</th></tr>
						</thead>
						<tbody id="geocodingOptions"></tbody>
					</table>
				</div>
				<div>
					<h3>Geocoder:</h3>
					<div id="geocodersInput"></div>
				</div>
				
				<div class="text-center buttons">
					<button id="geocoderBtn" class="btn btn-success">Geocode</button>
					<button id="optionsClose" class="btn btn-close"><img src="assets/closeWhite.svg" class="btn-icon"> Close</button>
				</div>
				
			</div>
		</div>
		
		<!-- Footer -->
		<footer class="footer text-center">
			<p>&copy Bruno Verch√®re 2020</p>
		</footer>
    </body>
</html>